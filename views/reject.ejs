<!DOCTYPE ejs>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8"/>
    <link rel="stylesheet" type="text/css" href="design.css">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Rejected Images</title>
</head>
<body>
    <div class="container2">
        <header class="header">
            <img src="logo.png" alt="Logo" height="100px">
            <h2>REJECTED IMAGES</h2>
        </header>

        <div class="sidenav" id="sidenav">
            <a href="/dashboard">
                <i class="fa fa-bar-chart" aria-hidden="true"></i>
                <span class="sidenav-label">Dashboard</span>
            </a>
            <a href="/img_process">
                <i class="fa fa-cogs" aria-hidden="true"></i>
                <span class="sidenav-label">Image Processing</span>
            </a>
            <a href="/database">
                <i class="fa fa-database" aria-hidden="true"></i>
                <span class="sidenav-label">Result Review</span>
            </a>
            <a href="/reject">
                <i class="fa fa-ban" aria-hidden="true"></i>
                <span class="sidenav-label">Rejected Images</span>
            </a>
            <a href="/manage">
                <i class="fa fa-shopping-cart" aria-hidden="true"></i>
                <span class="sidenav-label">Products Maintenance</span>
            </a>
            <a href="/outlet">
                <i class="fa fa-shop"></i>
                <span class="sidenav-label">Outlet Listing</span>
            </a>
            <a href="/login/logout">
                <i class="fa fa-sign-out" aria-hidden="true"></i>
                <span class="sidenav-label">Logout</span>
            </a>
        </div>

    </div>

    <div class="table-container2" id="table-container2">
        <% if (data.length === 0) { %>
            <div class="gif-reject" style="margin-top: 10%;">
            <div class="tenor-gif-embed" data-postid="21094508" data-share-method="host" data-aspect-ratio="1.29555" data-width="100%"><a href="https://tenor.com/view/peachcry-peachmad-typing-homework-homeworktime-gif-21094508">Peachcry Peachmad GIF</a>
            </div> 
            <script type="text/javascript" async src="https://tenor.com/embed.js"></script>
            <p>No data of rejected image.</p>
        </div>
        <% } else { %>
        <table id="region" class="table" style="width:90%">
            <thead>
                <tr>
                    <th>No</th>
                    <th>Reject Date</th>
                    <th>Staff</th>
                    <th>Outlet</th>
                    <th>Original Image</th>
                    <th>Reason</th>
                </tr>
            </thead>
            <tbody>
                <% data.forEach((record, index) => { %>
                    <tr>
                        <td></td>
                        <td><%= record.reject_date.toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' })%></td>
                        <td><%= record.first_name %> <%= record.last_name %></td>
                        <td><%= record.outlet_name %></td>
                        <td><a href="<%= record.image_path %>" class="image-link" style="font-family: 'OpenSans', sans-serif;"><img src="<%= record.image_path %>" alt="Thumbnail" class="thumbnail" style="height:125px"></a></td>
                        <td><%= record.reason %></td>
                    </tr>
                <% }); %>
            </tbody>
            <% } %>
        </table>
    </div>
    <div id="logoutConfirmation" class="logoutpopup">
        <p>Are you sure you want to logout?</p>
        <button id="confirmLogout">Yes</button>
        <button id="cancelLogout">No</button>
    </div>
    <div id="imageModal" class="modal">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <img id="modalImage" src="" alt="Image">
    </div> 
</body>
   <script src="script/sidenav.js"></script>
   <script src="script/backbt.js"></script>
   <script src="script/databasefx.js"></script>
   <script src="script/logout.js"></script>
</html>